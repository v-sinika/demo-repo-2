name: Deploy

on:
  workflow_dispatch:
    inputs:
      environment:
        description: 'Target environment'
        required: true
        type: choice
        options:
          - dev
          - staging
          - prod
      version:
        description: 'Version to deploy'
        required: false
        default: 'latest'

jobs:
  deploy:
    runs-on: ubuntu-latest
    environment: ${{ inputs.environment }}
    
    steps:
      - name: Checkout
        uses: v-sinika/demo-custom-actions/checkout@5b90eb39b716b5a269b747e2ce80fa7c52c7e6ce # main, commit date 2026-01-16
      
      - name: Setup Node.js
        uses: v-sinika/demo-custom-actions/setup-node@5b90eb39b716b5a269b747e2ce80fa7c52c7e6ce # main, commit date 2026-01-16
        with:
          node-version: '20'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Build
        run: npm run build
      
      - name: Deploy to environment
        uses: v-sinika/demo-custom-actions/deploy@5b90eb39b716b5a269b747e2ce80fa7c52c7e6ce # main, commit date 2026-01-16
        with:
          environment: ${{ inputs.environment }}
          version: ${{ inputs.version }}
